---
page_title: "genesyscloud_flow Resource - terraform-provider-genesyscloud"
subcategory: ""
description: |-
  Genesys Cloud Flow.
  Export block label: "{type}_{name}"
---
# genesyscloud_flow (Resource)

Genesys Cloud Flow.

Export block label: "{type}_{name}"

## API Usage
The following Genesys Cloud APIs are used by this resource. Ensure your OAuth Client has been granted the necessary scopes and permissions to perform these operations:

* [POST /api/v2/flows/jobs](https://developer.mypurecloud.com/api/rest/v2/architect/#post-api-v2-flows-jobs)
* [GET /api/v2/flows](https://developer.genesys.cloud/api/rest/v2/architect/#get-api-v2-flows)
* [GET /api/v2/flows/{flowId}](https://developer.genesys.cloud/api/rest/v2/architect/#get-api-v2-flows--flowId-)
* [GET /api/v2/flows/jobs/{jobId}](https://developer.mypurecloud.com/api/rest/v2/architect/#get-api-v2-flows-jobs--jobId-)
* [DELETE /api/v2/flows/{flowId}](https://developer.genesys.cloud/api/rest/v2/architect/#delete-api-v2-flows--flowId-)

**NOTE: Version 1.7.0 and lower had a defect that could cause improper variable substitution and an inadvertent deployment of a flow during a terraform plan. Please use version 1.8.0 or higher of the CX as Code provider.  With the newer versions of CX as Code you must set the file_content_hash attribute. See the example below on how to do this.**

## Example Usage

```terraform
resource "genesyscloud_flow" "inbound_call_flow" {
  filepath          = "${local.working_dir.flow}/inboundcall_flow_example_substitutions.yaml" // Also supports S3 paths e.g. s3://my-bucket/flows/example.yaml
  file_content_hash = filesha256("${local.working_dir.flow}/inboundcall_flow_example_substitutions.yaml")
  // Example flow configuration using substitutions:
  /*
  inboundCall:
    name: "{{flow_name}}"
    defaultLanguage: "{{default_language}}"
    startUpRef: ./menus/menu[mainMenu]
    initialGreeting:
      tts: "{{greeting}}"
    menus:
      - menu:
          name: Main Menu
          audio:
            tts: You are at the Main Menu, press 9 to disconnect.
          refId: mainMenu
          choices:
            - menuDisconnect:
                name: "{{menu_disconnect_name}}"
                dtmf: digit_9
  */
  // see https://developer.genesys.cloud/devapps/archy/flowAuthoring/lesson_07_substitutions
  // these replace the key-value pairs from the --optionsFile when using the archy CLI
  substitutions = {
    flow_name            = "An example flow"
    default_language     = "en-us"
    greeting             = "Hello World"
    menu_disconnect_name = "Disconnect"
  }
}
resource "genesyscloud_flow" "outbound_call_flow" {
  filepath          = "${local.working_dir.flow}/outboundcall_flow_example.yaml"
  file_content_hash = filesha256("${local.working_dir.flow}/outboundcall_flow_example.yaml")
  substitutions = {
    flow_name          = "An example outbound flow"
    home_division_name = data.genesyscloud_auth_division_home.home.name
    contact_list_name  = genesyscloud_outbound_contact_list.contact_list.name
    wrapup_code_name   = genesyscloud_routing_wrapupcode.win.name
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `filepath` (String) YAML file path for flow configuration. Note: Changing the flow name will result in the creation of a new flow with a new GUID, while the original flow will persist in your org.

### Optional

- `force_unlock` (Boolean) Will perform a force unlock on an architect flow before beginning the publication process.  NOTE: The force unlock publishes the 'draft'
				              architect flow and then publishes the flow named in this resource. This mirrors the behavior found in the archy CLI tool.
- `name` (String) Flow Name used for export purposes. Note: The 'substitutions' block should be used to set/change 'name' and any other fields in the yaml file
- `substitutions` (Map of String) A substitution is a key value pair where the key is the value you want to replace, and the value is the value to substitute in its place.
- `type` (String) Flow Type used for export purposes. Note: The 'substitutions' block should be used to set/change 'type' and any other fields in the yaml file
- `update_trigger_hash` (String) A hash value used to trigger resource updates. When this value changes, the resource will be refreshed. Use this to hash external values such as environment variables, outputs from other resources, or timestamps that should initiate an update. By default, `file_content_hash` hashes the content of the file specified by the filepath field to trigger updates. This field can be used as an alternative for greater control over the update triggers.

### Read-Only

- `file_content_hash` (String) Hash value of the YAML file content. Used to detect changes.
- `id` (String) The ID of this resource.

